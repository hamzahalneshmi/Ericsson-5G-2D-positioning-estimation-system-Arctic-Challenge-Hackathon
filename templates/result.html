<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Position Estimation Results</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYLFL4BVtYjoS78Mfm3Z4GJnCA1BdzVH7g4CF4Q+8pkPZ94Jk2b8VcFlkJD2Q" crossorigin="anonymous">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Arial', sans-serif;
        }
        .container {
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-top: 50px;
            text-align: center;
        }
        h2 {
            color: #003366;
            font-size: 2.5em;
            margin-bottom: 30px;
        }
        img {
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
        p {
            font-size: 1.2em;
            line-height: 1.6;
            color: #003366;
            margin-top: 20px;
        }
        a {
            color: #003366;
            text-decoration: none;
            font-weight: bold;
        }
        a:hover {
            text-decoration: underline;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        #instructionsModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            max-width: 600px;
            text-align: left;
        }

        #showInstructionsBtn {
            background-color: #007BFF;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Position Estimation Results</h2>
        {{ plot_div|safe }}
        <p>
            The plot above displays the estimated positions at each time instant. The blue markers represent the locations of the base stations, while the red markers indicate the estimated positions. The estimation is based on time-of-arrival (ToA) measurements and a least squares optimization method.
        </p>
        <p>
            The Euclidean distance between the estimated position and each base station is minimized during the optimization, ensuring accurate alignment with the observed ToA measurements. This approach enhances the robustness of the position estimation in the presence of noise and uncertainties.
        </p>
        <!-- Button to show instructions -->
        <button id="showInstructionsBtn">Show Navigation Instructions</button>

        <!-- Modal for instructions -->
        <div id="instructionsModal">
            <div class="modal-content">
                <h2>How to Navigate Plotly Figures</h2>
        <ol>
            <li>
                <strong>Zoom In and Out:</strong>
                <ul>
                    <li><strong>Mouse Scroll:</strong> Scroll up to zoom in, scroll down to zoom out.</li>
                    <li><strong>Zoom Buttons:</strong> Look for magnifying glass icons (+/-) to zoom in and out.</li>
                </ul>
            </li>

            <li>
                <strong>Pan (Move) Around the Plot:</strong>
                <ul>
                    <li><strong>Mouse Drag:</strong> Click and drag the mouse to pan around the plot.</li>
                </ul>
            </li>

            <li>
                <strong>Reset to Initial View:</strong>
                <ul>
                    <li><strong>Home Button:</strong> Click the home icon to return to the initial view.</li>
                </ul>
            </li>

            <li>
                <strong>Data Inspection:</strong>
                <ul>
                    <li><strong>Hover Information:</strong> Hover over data points to see additional details.</li>
                </ul>
            </li>

            <li>
                <strong>Toggle Visibility:</strong>
                <ul>
                    <li><strong>Legend:</strong> Click on legend items to toggle the visibility of traces.</li>
                </ul>
            </li>

            <li>
                <strong>Download and Save:</strong>
                <ul>
                    <li><strong>Download Button:</strong> If available, use the download button to save the plot.</li>
                </ul>
            </li>

            <li>
                <strong>Time Series Navigation:</strong>
                <ul>
                    <li><strong>Range Slider:</strong> Slide to focus on specific time periods (for time series data).</li>
                </ul>
            </li>

            <li>
                <strong>3D Rotation (For 3D Plots):</strong>
                <ul>
                    <li><strong>3D Rotation Controls:</strong> If applicable, use controls to rotate and tilt the view.</li>
                </ul>
            </li>

            <li>
                <strong>Custom Interactivity:</strong>
                <ul>
                    <li><strong>Custom Buttons:</strong> Explore any custom buttons or controls for specific interactions.</li>
                </ul>
            </li>

            <li>
                <strong>Responsive Design:</strong>
                <ul>
                    <li>Ensure the web application is responsive for various devices (desktop, tablet, mobile).</li>
                </ul>
            </li>
        </ol>
        <button onclick="closeInstructions()">Close</button>
    </div>
</div>
        
        <p>
            <a href="/">Back to Home</a>
        </p>
    </div>
    <!-- Bootstrap JS (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-eOJMYLFL4BVtYjoS78Mfm3Z4GJnCA1BdzVH7g4CF4Q+8pkPZ94Jk2b8VcFlkJD2Q" crossorigin="anonymous"></script>
    <script>
        // Function to show instructions modal
        function showInstructions() {
            document.getElementById('instructionsModal').style.display = 'flex';
        }
    
        // Function to close instructions modal
        function closeInstructions() {
            document.getElementById('instructionsModal').style.display = 'none';
        }
    
        // Attach click event to the button
        document.getElementById('showInstructionsBtn').addEventListener('click', showInstructions);
    </script>
    
</body>
</html>
